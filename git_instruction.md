# **Инструкция по работе с Git**

![Логотип git](logo.png)

## Предварительная настройка Git

Чтобы "представиться" программе git, нужно ввести команды:

    git config --global user.name "Ваше имя"
    git config --global user.email  "Ваша почта"

## Создание репозитория

Чтобы инициализировать новый репозиторий, нужно ввети команду:

    git init

## Добавление в индекс

Чтобы добавить изменения в индекс (для фиксации в следующем коммите), нужно ввести команду (воспользуйся клавишей tab для автозаполнения имени файла):

    git add <имя файла>

## Фиксация изменений

Чтобы зафиксировать изменения, добавленные в индекс, нужно ввести команду:

    git commit -m "краткая информация о коммите"

P.S. (1) чтобы добавить описание в редакторе по умолчанию, нужно ввести команду:

    git commit

P.S. (2) чтобы совместить добавление в индекс и фиксацию изменений, нужно ввести команду со след. ключами:

    git commit -am "краткая информация о коммите"

## Состояние изменений

Чтобы посмотреть на какой ветке находимся, проверить индексацию изменений и увидеть файлы, которые не отслеживаются, нужно ввести команду:

    git status

Пример вывода (то, что в конце, значит все ок):
On branch master
nothing to commit, working tree clean

## Список коммитов в репозитории

Чтобы посмотреть полную информацию о коммитах, нужно ввести команду (нажмите q для выхода):

    git log

Чтобы посмотреть информацию обо _всех_ коммитах (а не начиная от того коммита, на котором мы находимся), нужно ввести команду c ключом:

    git log --all

Чтобы посмотреть сокращенную версию обо всех коммитах, необходимо добавить ключ _oneline_:

    git log --all --oneline

Чтобы посмотреть краткую информацию обо всех коммитах в графическом представлении, выполните команду:

	git log --oneline --all --graph

## Сравнение изменений

Чтобы сравнить версию сохраненную и последнюю закоммиченную, нужно ввести команду:

    git diff

Чтобы сравнить конкретные версии (можно менять местами хэши), нужно ввести команду:

    git diff "hash1" "hash2"

## Переключение на конретный коммит

Чтобы перейти на конкретный коммит, нужно ввести команду:

    git checkout "hash"

Чтобы вернуться на последний коммит (не надо указывать хэш последнего коммита), правильно делать так:

    git checkout master


## Очистить вывод в терминале

Чтобы очистить терминал от ранее введенных команд и информации, нужно ввести команду:

    clear

## Ветвления 

Ветвления в Git нужны для отклонения от основной линии разработки и продолжения работы независимо от неё, не вмешиваясь в основную линию.

### Создание новой ветки

Чтобы создать новую ветку, нужно ввести команду:

    git branch <newbranch>

где \<newbranch> - это имя создаваемой ветки.

Чтобы посмотреть на какой ветке мы находимся на данный момент, необходимо выполнить команду (текущая ветка будет помечена звездочкой):

	git branch

Чтобы посмотреть последний коммит на каждой из веток, необходимо выполнить команду:

	git branch -v

 Чтобы переключиться на определенную ветку, необходимо выполнить команду:

    git checkout <branch_name>

### Слияние веток

Это перенос кода из одной ветки в другую. Например, когда мы заканчиваем работу над веткой, например, сделали новый функционал или поправили багу, мы сливаем ее в мастер. В мастере код проверяется еще раз и выкладывается на боевой сервер. Сливать друг в друга можно любые ветки.
Чтобы слить любую ветку с текущей, необходимо выполнить команду:

	git merge <branch_name>

Чтобы увидеть все ветки, содержащие наработки, которые вы пока ещё не слили в текущую ветку, необходимо выполнить команду:

	git branch --no-merged

Чтобы посмотреть те ветки, которые вы уже слили с текущей, можете выполнить команду:

	git branch --merged

### Удаление веток 

Чтобы удалить ветку, необходимо выполнить команду:

    git branch -d <branch_name>

Чтобы удалить ветку принудительно (если первой командой удалить не получилось):

    git branch -D <branch_name>

P.S. не забывайте удалять ветки после слияния!

### Основные конфликты слияния

Если вы изменили одну и ту же часть одного и того же файла по-разному в двух объединяемых ветках, Git не сможет их объединить.

В конфликтующие файлы Git добавляет специальные маркеры конфликтов, чтобы вы могли исправить их вручную. Версия из HEAD (ветки master, если её извлекли перед запуском команды слияния) - это верхняя часть блока (всё, что над =======), 
а версия из другой ветки представлена в нижней части. 

В VS Code есть следущие варианты разрешения конфликтов:

* Accept Current Change  [выбрать вариант текущей ветки]
* Accept Incoming Change [выбрать вариант ветки, из которой идет слияние]
* Accept Both Change  [оба варианта останутся в файле друг под другом]
* Compare Change  [открывает дополнительное окно-вкладку со сравнением двух версий файла, похожее на редактор разниц]

## Удаленные репозитории

Удаленный репоиторий это облачное хранилище ваших файлов.

### Создание репозитория

Создать репозиторий можно в сервисе Github, достаточно выбрать соответствующую опцию и назначить доступное имя для репозитория.

Также можно скопировать к себе в аккаунт Github чей-то проект, для этого нужно нажать на кнопку "Fork" и следовать инструкциям сервиса.

После создания необходимо связать удаленный репозиторий с локальным репозиторием.

GitHub предлагает 3 варианта:

- or create a new repository on the command line (создание нового репозитория)

 _Список команд_:

    echo "# имя_репозитория" >> README.md
    git init
    git add README.md
    git commit -m "first commit"
    git branch -M main
    git remote add origin <путь_репозитория_на_github>
    git push -u origin main

- or push an existing repository from the command line (связать с существующим репозиторием)

 _Список команд_:

    git remote add origin <путь_репозитория_на_github>
    git branch -M master
    git push -u origin master

 *Примечание*: обратите внимание на название ветки main / master!

 Пояснения к командам: 
 1) Команда *"git remote"* служит для управления списком удалённых репозиториев. Она позволяет сохранять длинные URL репозиториев в виде понятных коротких строк,  например «origin», так что вам не придётся набирать её каждый раз для связи с сервером.

 2) Команда *"git remote add origin <путь_репозитория_на_github>"*. Добавляет секцию в файл .git/config, в которой заданы имя удалённого репозитория (origin), его URL и спецификация ссылок для извлечения данных.

 3) Команда *"git branch -M master"*. Ключ -M означает принудительное выполнение переименования.

 4) Команда *"git push -u origin master"* используется для установления связи с удалённым репозиторием, вычисления локальных изменений отсутствующих в нём, и собственно их передачи в вышеупомянутый репозиторий. Этой команде нужно право на запись в репозиторий, поэтому она использует аутентификацию. Указанная команда отправляет изменения на сервер в конкретную ветку.

- or import code from another repository (импорт из другого источника с указанием URL)

### Работа с репозиториями

Чтобы локально работать с удаленным репозиторием, необходимо выполнить команду:

    git clone <адрес_репозитория>

Далее переходим в папку с проектом и выполняем команду:

    git status

Если ошибок нет, то создаем новую ветку и переходим в нее:

    git branch <имя_ветки>
    git checkout <имя_ветки>

Вносим изменения, коммитим изменения и выполняем команду отправку изменений на удаленный репозиторий (первично понадобится настройка авторизации!):

	git push

VS code предлагает выполнить следующую команду для отправки изменений в Github:

	git push --set-upstream origin description

### Внесение изменений на сервисе Github

Также можно вносить изменения в файлах на сервисе GitHub (обязательно их коммитим в специальной форме). 

Чтобы применить внесенные изменения в локальном репозитории, необходимо выполнить команду:

	git pull

*Примечание*: 

Команда *"git pull"* работает как комбинация команд git fetch и git merge, т.е. Git вначале забирает изменения из указанного удалённого репозитория, а затем пытается слить их с текущей веткой.

### Отправка изменений автору проекта в Github

Чтобы отправить запрос на изменение автору проекта, необходимо создать Pull Request в GitHub. 

Копируем проект, создаем отдельную ветку, сохраняем изменения и выполняем команду

    git push 

После выполнения команды в GitHub появляется кнопка "Compare & pull request". 

При отсутствии конфликтов пишем примечание к проекту и отправляем автору, вы прекрасны :)
